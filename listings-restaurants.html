<!DOCTYPE html>
<html lang="ar" dir="rtl">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Restaurants Listings</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <link
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css"
      rel="stylesheet"
    />

    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css"
    />
    <link rel="stylesheet" href="header.css" />
    <link rel="stylesheet" href="./bottom-navigation.css" />
    <link rel="stylesheet" href="./stylized-card.css" />
    <style>
      @import url("https://fonts.googleapis.com/css2?family=Cairo:wght@400;500;600;700&display=swap");

      body {
        font-family: "Cairo", sans-serif;
        background-color: #f8f9fa;
      }

      .view-toggle {
        display: inline-flex;
        background: #f1f1f1;
        border-radius: 8px;
        padding: 4px;
      }

      .view-toggle button {
        padding: 8px 16px;
        border: none;
        background: none;
        border-radius: 6px;
      }

      .view-toggle button.active {
        background: #00bcd4;
        color: white;
      }

      .filters {
        background: white;
        border-radius: 12px;
        padding: 30px;
        margin: 20px 0;
        box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
      }

      /* Grid View Styles */
      .grid-view .rental-card {
        border-radius: 12px;
        overflow: hidden;
        background: white;
        box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
        transition: transform 0.2s;
      }

      .grid-view .rental-card:hover {
        transform: translateY(-5px);
      }

      .grid-view .card-image {
        height: 200px;
        object-fit: cover;
      }

      /* List View Styles */
      .rental-card {
        background: white;
        border-radius: 20px;
        overflow: hidden;
        padding: 8px;
        box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
        transition: transform 0.2s;
        margin-bottom: 20px;
      }

      .rental-card:hover {
        transform: translateY(-5px);
      }

      .image-container {
        position: relative;
        border-radius: 16px;
        overflow: hidden;
      }

      .card-image {
        width: 100%;
        height: 200px;
        object-fit: cover;
      }

      .favorite-btn {
        position: absolute;
        top: 10px;
        right: 10px;
        background: white;
        border: none;
        width: 32px;
        height: 32px;
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
        z-index: 1;
      }

      .favorite-btn i {
        font-size: 16px;
        color: #666;
      }

      .card-content {
        padding: 12px 4px 4px 4px;
        text-align: center;
      }

      .rating {
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 4px;
        margin-bottom: 8px;
      }

      .rating .stars {
        color: #ffd700;
      }

      .rating .score {
        color: #333;
        font-weight: 500;
      }

      .rating .reviews {
        color: #666;
        font-size: 0.9rem;
      }

      .rental-name {
        font-size: 1.1rem;
        font-weight: 600;
        color: #333;
        margin-bottom: 8px;
        text-align: center;
      }

      .location {
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 4px;
        color: #666;
        font-size: 0.9rem;
        margin-bottom: 8px;
      }

      .location i {
        font-size: 0.9rem;
      }

      .price {
        text-align: center;
        color: #00bcd4;
        font-weight: 600;
        font-size: 1.1rem;
      }

      .price .period {
        color: #666;
        font-size: 0.9rem;
        font-weight: normal;
      }

      /* Update list view styles */
      .list-view .rental-card {
        width: 100%;
        display: flex;
        padding: 20px;
        margin-bottom: 15px;
      }

      .list-view .image-container {
        width: 300px;
        flex-shrink: 0;
      }

      .list-view .card-content {
        /*flex: 1;*/
        padding: 20px;
        text-align: right;
      }

      .list-view .rating,
      .list-view .location {
        justify-content: flex-start;
      }

      @media (max-width: 768px) {
        .list-view .rental-card {
          flex-direction: column;
        }

        .list-view .image-container {
          width: 100%;
        }

        .list-view .card-content {
          flex-direction: column !important;

          text-align: center;
        }

        .list-view .rating,
        .list-view .location {
          justify-content: center;
        }
      }

      /* Range Slider Styles */
      .range-slider {
        position: relative;
        height: 30px;
      }

      .range-slider input {
        width: 100%;
        -webkit-appearance: none;
        background: #e9ecef;
        height: 4px;
        border-radius: 2px;
        outline: none;
      }

      .range-slider input::-webkit-slider-thumb {
        -webkit-appearance: none;
        width: 20px;
        height: 20px;
        background: #00bcd4;
        border-radius: 50%;
        cursor: pointer;
      }

      .range-values {
        display: flex;
        justify-content: space-between;
        margin-top: 10px;
        margin-bottom: 10px;
        color: #00bcd4;
        font-size: 0.9rem;
      }
    </style>
  </head>
  <body>
    <!-- Header -->
    <div class="container mt-2">
      <div class="d-flex justify-content-between align-items-center mb-4">
        <div class="profile-image">
          <a href="profile.html">
            <a href="profile.html">
              <img src="https://i.pravatar.cc/150" alt="" />
            </a>
          </a>
        </div>
        <button class="btn btn-outline rounded-circle p-0">
          <i class="bi bi-bell fs-4"></i>
        </button>
      </div>

      <div class="container-fluid py-4">
        <div class="d-flex justify-content-between align-items-center">
          <h2>كل المطاعم</h2>
          <div class="view-toggle">
            <button class="active" data-view="grid">
              <i class="fas fa-th-large"></i>
            </button>
            <button data-view="list">
              <i class="fas fa-list"></i>
            </button>
          </div>
        </div>

        <div class="filters">
          <div class="row">
            <div class="col-md-4">
              <label class="form-label">السعر اليومي</label>
              <div class="range-slider">
                <input
                  type="range"
                  id="priceRange"
                  min="500"
                  max="5000"
                  step="100"
                  value="5000"
                />
                <div class="range-values">
                  <span>2000 دج</span>
                  <span id="priceValue">100000 دج</span>
                </div>
              </div>
            </div>
            <div class="col-md-4 mt-5 mt-md-0">
              <label class="form-label">المنطقة</label>
              <select class="form-select" id="locationFilter">
                <option value="">الكل</option>
                <option value="Sidi M'Hamed">Sidi M'Hamed</option>
                <option value="El Madania">El Madania</option>
                <option value="El Biar">El Biar</option>
                <option value="Bir Mourad Rais">Bir Mourad Rais</option>
              </select>
            </div>
            <div class="col-md-4">
              <label class="form-label">التقييم</label>
              <select class="form-select" id="ratingFilter">
                <option value="">الكل</option>
                <option value="4">4+ نجوم</option>
                <option value="3">3+ نجوم</option>
              </select>
            </div>
          </div>
        </div>

        <div id="listingsContainer" class="grid-view">
          <!-- Listings will be dynamically inserted here -->
        </div>
      </div>
    </div>
    <!-- Bottom Navigation -->
    <nav class="bottom-nav py-2 fixed-bottom">
      <div class="container">
        <div class="row g-0 text-center">
          <div class="col">
            <a href="index.html" class="nav-link active">
              <i class="bi bi-house nav-icon"></i>
              <span>Home</span>
            </a>
          </div>
          <div class="col">
            <a href="booking.html" class="nav-link">
              <i class="bi bi-calendar2 nav-icon"></i>
              <span>Booking</span>
            </a>
          </div>
          <div class="col">
            <a href="bookmark.html" class="nav-link">
              <i class="bi bi-heart nav-icon"></i>
              <span>Saved</span>
            </a>
          </div>
          <div class="col">
            <a href="profile.html" class="nav-link">
              <i class="bi bi-person nav-icon"></i>
              <span>Profile</span>
            </a>
          </div>
        </div>
      </div>
    </nav>

    <script>
      // Restaurant listings data
      const listings = [
        {
          id: 1,
          name: "Arabesque Alger",
          location: "Bd Mouloud BEL HOUCHETE, Sidi M'Hamed 16000",
          price: 1200,
          priceUnit: "ابتداءا من",
          rating: 4.0,
          reviews: 120,
          image: "https://picsum.photos/800/500?random=5",
        },
        {
          id: 2,
          name: "Le Gibier d'Algérie",
          location:
            "riad el feth, Bois des Arcades, Local 02, El Madania 16015",
          price: 1400,
          priceUnit: "ابتداءا من",
          rating: 4.0,
          reviews: 120,
          image: "https://picsum.photos/800/500?random=6",
        },
        {
          id: 3,
          name: "Frais Maison",
          location: "El Biar",
          price: 1000,
          priceUnit: "ابتداءا من",
          rating: 4.0,
          reviews: 120,
          image: "https://picsum.photos/800/500?random=7",
        },
        {
          id: 4,
          name: "Mbfood",
          location: "Bd Maache Malek, Bir Mourad Rais 16000",
          price: 1100,
          priceUnit: "ابتداءا من",
          rating: 4.0,
          reviews: 120,
          image: "https://picsum.photos/800/500?random=8",
        },
      ];

      // View switching functionality
      const viewToggles = document.querySelectorAll(".view-toggle button");
      const listingsContainer = document.getElementById("listingsContainer");

      viewToggles.forEach((button) => {
        button.addEventListener("click", () => {
          viewToggles.forEach((btn) => btn.classList.remove("active"));
          button.classList.add("active");
          const view = button.dataset.view;
          listingsContainer.className = view + "-view";
          /* render the listing based on the type*/

          renderListings(listings);
        });
      });

      // Filtering functionality
      function filterListings() {
        const maxPrice = parseInt(document.getElementById("priceRange").value);
        const location = document.getElementById("locationFilter").value;
        const rating = document.getElementById("ratingFilter").value;

        const filtered = listings.filter((item) => {
          const priceMatch = item.price <= maxPrice;
          const locationMatch = !location || item.location.includes(location);
          const ratingMatch = !rating || item.rating >= parseFloat(rating);
          return priceMatch && locationMatch && ratingMatch;
        });

        renderListings(filtered);
      }

      // Render listings
      function renderListings(items) {
        const isGridView = listingsContainer.classList.contains("grid-view");

        listingsContainer.innerHTML =
          `<div class="${
            isGridView ? "row row-cols-1 row-cols-md-3 " : "row"
          }">` +
          items
            .map(
              (item) => `
        <div class="${
          isGridView ? "col-12 col-md-6 col-lg-4 col-xl-3" : "col-12"
        }">
            <div class="rental-card">
                <div class="image-container">
                    <img src="${item.image}" class="card-image" alt="${
                item.name
              }">
                    <button class="favorite-btn">
                        <i class="far fa-heart"></i>
                    </button>
                </div>
                <div class="card-content d-flex flex-column justify-content-sm-start align-items-sm-start py-2 px-3">

                    <div class="rating">
                        <div class="stars">
                            ${'<i class="fas fa-star"></i>'.repeat(5)}
                        </div>
                        <span class="score">${item.rating}</span>
                        <span class="reviews">(${item.reviews} Reviews)</span>
                    </div>
                    <h3 class="rental-name">${item.name}</h3>
                    <div class="location">
                        <i class="fas fa-map-marker-alt"></i>
                        <span class="text-end">${item.location}</span>
                    </div>
                    <div class="price">
                        ${item.price} دج <span class="period">/ ${
                item.priceUnit
              }</span>
                    </div>
                </div>
            </div>
        </div>
    `
            )
            .join("") +
          `</div>`;

        initializeFavoriteButtons();
      }
      // Initialize favorite buttons
      function initializeFavoriteButtons() {
        document.querySelectorAll(".favorite-btn").forEach((btn) => {
          btn.addEventListener("click", function (e) {
            e.preventDefault();
            const icon = this.querySelector("i");
            icon.classList.toggle("far");
            icon.classList.toggle("fas");
            icon.classList.toggle("text-danger");
          });
        });
      }

      // Price range functionality
      const priceRange = document.getElementById("priceRange");
      const priceValue = document.getElementById("priceValue");
      priceRange.addEventListener("input", function () {
        priceValue.textContent = `${this.value} دج`;
        filterListings();
      });

      // Add event listeners for filters
      document
        .getElementById("locationFilter")
        .addEventListener("change", filterListings);
      document
        .getElementById("ratingFilter")
        .addEventListener("change", filterListings);

      // Initial render
      renderListings(listings);
    </script>
  </body>
</html>
